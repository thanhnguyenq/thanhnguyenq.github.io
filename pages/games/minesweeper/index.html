---
layout: default
title: MineSweeper
---
<table id="minesweeper">
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
  <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</table>
<style media="screen">
#minesweeper {
  max-width: 100%;
  table-layout:fixed;
}
#minesweeper tr td{
  width: 25px;
	height: 25px;
	line-height: 25px;
  display: inline-block;
	min-width: unset;
	color: #666;
	background: #666;
}
#minesweeper tr td:hover {
  background: #666;
  color: #666;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript">
$("#minesweeper td").click(function() {
  var col = $(this).parent().children().index($(this));
  var row = $(this).parent().parent().children().index($(this).parent());

  if(arr[row][col] != -1) {
	if(arr[row][col] != 0) {
		$(this).css("background", "unset");
		arrMark[row][col] = -2;
		$(this).html(arr[row][col]);
	} else {
		discover(row, col);
	}
  }
});

var arr = initArr();
arr = markNumber(arr);
var arrMark = initArr();

// var table = document.getElementById("minesweeper");
// for (var i = 0, row; row = table.rows[i]; i++) {
//   //iterate through rows
//   //rows would be accessed using the "row" variable assigned in the for loop
//   for (var j = 0, col; col = row.cells[j]; j++) {
//     //iterate through columns
//     //columns would be accessed using the "col" variable assigned in the for loop
//     // col.innerHTML = arr[i][j];
//   }
// }
// Initialize array
function initArr() {
  var arr = new Array(20);
  for (var i = 0; i < 20; i++) {
    arr[i] = new Array(20);
  }
  for (var i = 0; i < 20; i++) {
    for (var j = 0; j < 20; j++) {
      arr[i][j] = 0;
    }
    arr[i][Math.floor(Math.random() * 20)] = -1;
    arr[i][Math.floor(Math.random() * 20)] = -1;
  }
  return arr;
};

// Mark number around mine
function markNumber(arr) {
  for (var i = 0; i < 20; i++) {
    for (var j = 0; j < 20; j++) {
      if(arr[i][j] == -1) {
        // Top Left
        if(arr[i - 1] != null && arr[i - 1][j - 1] != null && arr[i - 1][j - 1] != -1) {
          arr[i - 1][j - 1] += 1;
        }
        // Top
        if(arr[i - 1] != null  && arr[i - 1][j] != null && arr[i - 1][j] != -1) {
          arr[i - 1][j] += 1;
        }
        // Top Right
        if(arr[i - 1] != null && arr[i - 1][j + 1] != null && arr[i - 1][j + 1] != -1) {
          arr[i - 1][j + 1] += 1;
        }
        // Right
        if(arr[i] != null && arr[i][j + 1] != null && arr[i][j + 1] != -1) {
          arr[i][j + 1] += 1;
        }
        // Bottom Right
        if(arr[i + 1] != null && arr[i + 1][j + 1] != null && arr[i + 1][j + 1] != -1) {
          arr[i + 1][j + 1] += 1;
        }
        // Bottom
        if(arr[i + 1] != null && arr[i + 1][j] != null && arr[i + 1][j] != -1) {
          arr[i + 1][j] += 1;
        }
        // Bottom Left
        if(arr[i + 1] != null && arr[i + 1][j - 1] != null && arr[i + 1][j - 1] != -1) {
          arr[i + 1][j - 1] += 1;
        }
        // Left
        if(arr[i] != null && arr[i][j - 1] != null && arr[i][j - 1] != -1) {
          arr[i][j - 1] += 1;
        }
      }
    }
  }
  return arr;
};
function discover(row, col) {
	// Is discovered?
	if(arrMark[row][col] == -2) {
		return;
	}
	var table = $("#minesweeper")[0];
	var cell = table.rows[row].cells[col];
	var $cell = $(cell);
	$cell.css("background", "unset");
	arrMark[row][col] = -2;
	$cell.html(arr[row][col]);

	if(arr[row][col] != 0) {
		return;
	}

	// Top Left
	if(arr[row - 1] != null && arr[row - 1][col - 1] != null && arr[row - 1][col - 1] != -1) {
	  discover(row - 1, col - 1);
	}
	// Top
	if(arr[row - 1] != null && arr[row - 1][col] != null && arr[row - 1][col] != -1) {
	  discover(row - 1, col);
	}
	// Top Right
	if(arr[row - 1] != null && arr[row - 1][col + 1] != null && arr[row - 1][col + 1] != -1) {
	  discover(row - 1, col + 1);
	}
	// Right
	if(arr[row] != null && arr[row][col + 1] != null && arr[row][col + 1] != -1) {
	  discover(row, col + 1);
	}
	// Bottom Right
	if(arr[row + 1] != null && arr[row + 1][col + 1] != null && arr[row + 1][col + 1] != -1) {
	  discover(row + 1, col + 1);
	}
	// Bottom
	if(arr[row + 1] != null && arr[row + 1][col] != null && arr[row + 1][col] != -1) {
	  discover(row + 1, col);
	}
	// Bottom Left
	if(arr[row + 1] != null && arr[row + 1][col - 1] != null && arr[row + 1][col - 1] != -1) {
	  discover(row + 1, col - 1);
	}
	// Left
	if(arr[row] != null && arr[row][col - 1] != null && arr[row][col - 1] != -1) {
	  discover(row, col - 1);
	}
};
</script>
